# =============================================================================
# SECURE FILE SERVER - ENVIRONMENT CONFIGURATION SAMPLE
# =============================================================================
# Copy this file to .env and configure your values
# DO NOT commit .env to version control - it contains sensitive information

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================

# Environment (development/production)
NODE_ENV=development

# Server port
PORT=3000

# Server host
HOST=localhost

# Frontend URL for download links in emails (recipient opens this to enter OTP)
BASE_URL=http://localhost:5173

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# SQLite database file path
DB_PATH=./data/secure-files.db

# =============================================================================
# FILE STORAGE CONFIGURATION
# =============================================================================

# Directory to store encrypted files
STORAGE_PATH=./data/uploads

# Maximum file size in bytes (100MB = 104857600)
MAX_FILE_SIZE=104857600

# How long to keep files before cleanup (days)
FILE_RETENTION_DAYS=30

# =============================================================================
# EMAIL CONFIGURATION (Required for file sharing)
# =============================================================================
# Mapped from your Laravel/PHP configuration

# Email service provider (smtp/gmail/sendgrid)
EMAIL_SERVICE=smtp

# SMTP server hostname
EMAIL_HOST=mail.mailtest.radixweb.net

# SMTP server port
EMAIL_PORT=587

# Use secure connection - false for TLS (STARTTLS), true for SSL
EMAIL_SECURE=false

# Email account username
EMAIL_USER=testphp@mailtest.radixweb.net

# Email account password
EMAIL_PASS=Radix@web#8

# From email address
EMAIL_FROM=testphp@mailtest.radixweb.net

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# Allowed CORS origins (comma-separated for multiple)
CORS_ORIGIN=http://localhost:5173

# Rate limiting: Time window in milliseconds (15 minutes = 900000)
RATE_LIMIT_WINDOW_MS=900000

# Rate limiting: Maximum requests per IP per window
RATE_LIMIT_MAX_REQUESTS=10

# OTP: Maximum verification attempts per file
OTP_MAX_ATTEMPTS=3

# OTP: Cooldown between attempts in milliseconds (5 seconds = 5000)
OTP_COOLDOWN_MS=5000

# Upload rate limit: window in ms (15 minutes = 900000)
UPLOAD_RATE_LIMIT_WINDOW_MS=900000
# Upload rate limit: max requests per window
UPLOAD_RATE_LIMIT_MAX_REQUESTS=20

# File access (metadata/download) rate limit: window in ms (1 minute = 60000)
FILE_ACCESS_RATE_LIMIT_WINDOW_MS=60000
# File access: max requests per window
FILE_ACCESS_RATE_LIMIT_MAX_REQUESTS=30

# Recipient list access rate limit: window in ms (15 minutes = 900000)
RECIPIENT_ACCESS_RATE_LIMIT_WINDOW_MS=900000
# Recipient list: max requests per window
RECIPIENT_ACCESS_RATE_LIMIT_MAX_REQUESTS=5

# =============================================================================
# ENCRYPTION AT REST
# =============================================================================
# Server-side encryption for files on disk and sensitive DB columns (AES-256-GCM).
# Default off; set ENCRYPTION_ENABLED=true and ENCRYPTION_MASTER_KEY to enable.
# Startup fails if enabled but key is missing or invalid.

# Master key (KEK): 32 bytes as 64 hex chars or 44 base64 chars. Use a secret manager/KMS in production.
ENCRYPTION_MASTER_KEY=<64 hex chars or base64>

# Enable encryption at rest (true/false). When true, ENCRYPTION_MASTER_KEY must be set.
ENCRYPTION_ENABLED=false

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

# Log level (error, warn, info, debug)
LOG_LEVEL=info

# Enable audit logging (true/false)
AUDIT_LOG_ENABLED=true

# =============================================================================
# EMAIL MOCK (Development Only)
# =============================================================================

# Use mock email service in development (logs instead of sending real emails)
USE_MOCK_EMAIL=true
USE_SQLITE=true